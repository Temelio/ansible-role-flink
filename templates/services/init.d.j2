#!/bin/bash
# {{ ansible_managed }}

### BEGIN INIT INFO
# Provides:          {{ flink_service_name }}
# Required-Start:    $remote_fs
# Required-Stop:     $remote_fs
# Should-Start:      $network $time
# Should-Stop:       $network $time
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: {{ flink_service_description }}
# Description:       {{ flink_service_description }}
### END INIT INFO
#

# Ensure pid dir exists
/bin/mkdir -p {{ flink_pid_dir.path }}
/bin/chown {{ flink_user.name }}:{{ flink_group.name }} {{ flink_pid_dir.path }}
/bin/chmod {{ flink_pid_dir.mode }} {{ flink_pid_dir.path }}

test -e {{ flink_root_dir.path }}/current/flink-daemon.sh || exit 1

exec {{ flink_root_dir.path }}/current/bin/flink-daemon.sh $@
